{% load form_extras %}
<div class="modal fade" id="editModal-{{ trade.id }}" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content modal-dark">
      <div class="modal-header">
        <h5 class="modal-title">Edit: {{ trade.item_name }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      {% if trade.sell_price is None %}
      <form method="post" action="{% url 'index' %}">
        {% csrf_token %}
        <input type="hidden" name="action" value="sell">
        <input type="hidden" name="trade_id" value="{{ trade.id }}">
        <div class="modal-body">
          <div class="mb-3"><label class="form-label">Sell Price</label>{{ trade.edit_form.sell_price|add_class:"form-control"}}</div>
          <div class="mb-3"><label class="form-label">Sell Source</label>{{ trade.edit_form.sell_source|add_class:"form-select"}}</div>
          <div class="mb-3"><label class="form-label">Sell Date</label>{{ trade.edit_form.sell_date|add_class:"form-control"}}</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save & Close</button>
        </div>
      </form>
      {% else %}
      <form method="post" action="{% url 'index' %}" class="row g-3 m-0">
        {% csrf_token %}
        <input type="hidden" name="action" value="edit">
        <input type="hidden" name="trade_id" value="{{ trade.id }}">
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-12"><label class="form-label">Item Name</label>{{ trade.edit_form.item_name }}</div>
            <div class="col-6"><label class="form-label">Buy Price</label>{{ trade.edit_form.buy_price }}</div>
            <div class="col-6"><label class="form-label">Buy Source</label>{{ trade.edit_form.buy_source }}</div>
            <div class="col-12"><label class="form-label">Buy Date</label>{{ trade.edit_form.buy_date }}</div>
            <hr class="hr-soft" />
            <div class="col-6"><label class="form-label">Sell Price</label>{{ trade.edit_form.sell_price }}</div>
            <div class="col-6"><label class="form-label">Sell Source</label>{{ trade.edit_form.sell_source }}</div>
            <div class="col-12"><label class="form-label">Sell Date</label>{{ trade.edit_form.sell_date }}</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
      {% endif %}
    </div>
  </div>
</div>